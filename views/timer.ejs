<!DOCTYPE html>
<html>
	<head>
		<title>Timer</title>
		<link rel="stylesheet" href="/stylesheets/style.css" />
		<script>
			const startSeconds = <%= seconds %>;
			const startTimestamp = new Date().getTime();
		</script>
	</head>
	<body>
		<p id="timer"></p>
		<hr>
		<p>
			You can start the timer by entering your time in the url.
		</p>
		<p>
			Examples: <br>
			<a href="https://sharable-webtimer.herokuapp.com/1h">sharable-webtimer.herokuapp.com/1h</a> will start a timer for 1 hour <br>
			<a href="https://sharable-webtimer.herokuapp.com/1h20m">sharable-webtimer.herokuapp.com/1h20m</a> will start a timer for 1 hour and 20 minutes <br>
			<a href="https://sharable-webtimer.herokuapp.com/3w">sharable-webtimer.herokuapp.com/3w</a> will start a timer for 3 weeks <br>
		</p>
	</body>
	<script src="/javascripts/timer.js"></script>
	<script>
		//current timestamp
		setInterval(() => {
			const currentTimestamp = new Date().getTime();
			const diffTimestampSeconds = ((currentTimestamp - startTimestamp) / 1000) | 0;
			var secondsLeft = startSeconds - diffTimestampSeconds;
			if(secondsLeft < 0) secondsLeft = 0;
			
			const content = toTimerString(secondsLeft);
			setTimerContents(content);
			document.title = secondsLeft % 2 == 0 ? content.replace(/:/g, " ") : content;
		}, 500);
	</script>
</html>